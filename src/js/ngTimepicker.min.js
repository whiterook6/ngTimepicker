!function(){angular.module("jkuri.timepicker",[]).directive("ngTimepicker",["$document",function(a){var b=function(a,b){a.initialTime=a.time||"11:00",a.step=b.step||"15";var c=b.showMeridian||!1;a.showMeridian="true"===c||c===!0,a.meridian=b.meridian||"AM",a.theme=b.theme||"",b.editable&&"false"!==b.editable?a.editable=!0:a.editable=!1},c=function(a){var b=a.firstChild,c=b.offsetTop+b.offsetHeight,d=b.offsetLeft;return{top:c-1,left:d}},d=function(a){var b=a.initialTime.split(":");a.hour=parseInt(b[0])%24,a.showMeridian&&(0===a.hour?(a.hour=12,a.meridian="AM"):12===a.hour?(a.hour=12,a.meridian="PM"):a.hour>12&&a.hour<22?(a.hour="0"+(a.hour-12),a.meridian="PM"):a.hour>=22?(a.hour=a.hour-12,a.meridian="PM"):(a.hour=a.hour,a.meridian="AM")),a.minutes=b[1]},e=function(a){return!isNaN(a.hour)&&!isNaN(a.minutes)},f=function(a){var b;a.showMeridian?(b=a.hour+":"+a.minutes,a.viewValue=b+" "+a.meridian,b=g(a)+":"+a.minutes,a.time=b):(b=a.hour+":"+a.minutes,a.viewValue=b,a.time=b)},g=function(a){var b=parseInt(a.hour,10);return 12===b&&"PM"===a.meridian?12:12===b&&"AM"===a.meridian?"00":"PM"===a.meridian?b+12:0===b?12:b<10?"0"+b:b};return{restrict:"EA",scope:{time:"="},link:function(g,h,i){b(g,i),g.opened=!1;var j=c(h[0]);g.left=j.left+"px",g.top=j.top+"px",g.showTimepicker=function(){g.opened=!0},g.incrementHour=function(){g.showMeridian?12===parseInt(g.hour,10)?g.hour=1:11===parseInt(g.hour,10)?(g.hour=12,g.toggleMeridian()):g.hour=parseInt(g.hour,10)+1:parseInt(g.hour,10)<23?g.hour=parseInt(g.hour,10)+1:g.hour=0,parseInt(g.hour,10)<10&&(g.hour="0"+g.hour),f(g)},g.decreaseHour=function(){g.showMeridian?1===parseInt(g.hour,10)?g.hour=12:12===parseInt(g.hour,10)?(g.hour=11,g.toggleMeridian()):g.hour=parseInt(g.hour,10)-1:0===parseInt(g.hour,10)?g.hour=23:g.hour=parseInt(g.hour,10)-1,parseInt(g.hour,10)<10&&(g.hour="0"+g.hour),f(g)},g.incrementMinutes=function(){g.minutes=parseInt(g.minutes,10)+parseInt(g.step,10),g.minutes>59&&(g.minutes="00",g.incrementHour()),f(g)},g.decreaseMinutes=function(){g.minutes=parseInt(g.minutes,10)-parseInt(g.step,10),parseInt(g.minutes,10)<0&&(g.minutes=60-parseInt(g.step,10),g.decreaseHour()),0===parseInt(g.minutes,10)&&(g.minutes="00"),f(g)},g.keyDown=function(a,b){40===a.keyCode?"minutes"==b?g.decreaseMinutes():g.decreaseHour():38===a.keyCode&&("minutes"==b?g.incrementMinutes():g.incrementHour())},g.toggleMeridian=function(){g.meridian="AM"===g.meridian?"PM":"AM",f(g)},g.edit=function(){g.editable&&e()&&f(g)},a.on("click",function(a){h===a.target||h[0].contains(a.target)||g.$apply(function(){g.opened=!1})}),d(g),f(g)},template:'<input type="text" ng-focus="showTimepicker()" ng-value="viewValue" class="ng-timepicker-input" ng-readonly="true"><div class="ng-timepicker" ng-show="opened" ng-style="{\'left\': left, \'top\': top}">  <table>    <tbody>    <tr>        <td class="act noselect" ng-click="incrementHour()"><i class="fa fa-angle-up"></i></td>        <td></td>        <td class="act noselect" ng-click="incrementMinutes()"><i class="fa fa-angle-up"></i></td>        <td class="act noselect" ng-click="toggleMeridian()" ng-show="showMeridian"><i class="fa fa-angle-up"></i></td>      </tr>      <tr>        <td><input type="text" ng-model="hour" ng-readonly="!editable" ng-keydown="keyDown($event, \'hours\');" ng-change="edit()"></td>        <td>:</td>        <td><input type="text" ng-model="minutes" ng-readonly="!editable" ng-keydown="keyDown($event, \'minutes\');" ng-change="edit()"></td>        <td ng-show="showMeridian"><input type="text" ng-model="meridian" ng-readonly="true"></td>      </tr>      <tr>        <td class="act noselect" ng-click="decreaseHour()"><i class="fa fa-angle-down"></i></td>        <td></td>        <td class="act noselect" ng-click="decreaseMinutes()"><i class="fa fa-angle-down"></i></td>        <td class="act noselect" ng-click="toggleMeridian()" ng-show="showMeridian"><i class="fa fa-angle-down"></i></td>      </tr>  </table></div>'}}])}();